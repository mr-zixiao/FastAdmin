<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æ¡£ç®¡ç† - Dify</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            color: #1f2937;
            line-height: 1.6;
        }
        
        .header {
            background: #fff;
            border-bottom: 1px solid #e5e7eb;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .back-btn {
            padding: 8px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }
        
        .header h1 {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }
        
        .btn-secondary:hover {
            background: #e5e7eb;
        }
        
        .container {
            max-width: 1400px;
            margin: 24px auto;
            padding: 0 24px;
        }
        
        .toolbar {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .toolbar-left {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .search-input {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            width: 300px;
        }
        
        .filter-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        
        .toolbar-right {
            display: flex;
            gap: 12px;
        }
        
        .checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .documents-table {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .table-header {
            background: #f9fafb;
            padding: 12px 16px;
            display: grid;
            grid-template-columns: 40px 2fr 1fr 120px 120px 150px;
            gap: 16px;
            font-size: 13px;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .table-row {
            padding: 16px;
            display: grid;
            grid-template-columns: 40px 2fr 1fr 120px 120px 150px;
            gap: 16px;
            border-bottom: 1px solid #f3f4f6;
            align-items: center;
        }
        
        .table-row:hover {
            background: #f9fafb;
        }
        
        .table-row.selected {
            background: #eff6ff;
        }
        
        .doc-name {
            font-weight: 500;
            color: #111827;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .doc-icon {
            font-size: 18px;
        }
        
        .doc-size {
            font-size: 13px;
            color: #6b7280;
            margin-top: 4px;
        }
        
        .doc-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-success {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-processing {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-error {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .status-pending {
            background: #f3f4f6;
            color: #374151;
        }
        
        .doc-progress {
            font-size: 13px;
            color: #6b7280;
        }
        
        .doc-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-icon {
            padding: 6px;
            background: transparent;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            color: #6b7280;
        }
        
        .btn-icon:hover {
            background: #f3f4f6;
            color: #111827;
        }
        
        .batch-actions {
            background: white;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
            display: none;
            align-items: center;
            gap: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .batch-actions.show {
            display: flex;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 24px;
        }
        
        .page-btn {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .page-btn:hover {
            background: #f3f4f6;
        }
        
        .page-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        .tech-section {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .tech-section h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #111827;
        }
        
        .tech-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .tech-item:last-child {
            border-bottom: none;
        }
        
        .tech-item h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .tech-item p {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.6;
        }
        
        .tech-item ul {
            margin-left: 20px;
            margin-top: 8px;
        }
        
        .tech-item li {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 4px;
        }
        
        .code-block {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 12px;
            margin-top: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #374151;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <button class="back-btn" onclick="location.href='knowledge-base-detail.html'">â†</button>
            <h1>æ–‡æ¡£ç®¡ç†</h1>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="location.href='document-upload.html'">æ‰¹é‡ä¸Šä¼ </button>
            <button class="btn btn-primary" onclick="location.href='document-upload.html'">ä¸Šä¼ æ–‡æ¡£</button>
        </div>
    </div>
    
    <div class="container">
        <div class="batch-actions" id="batchActions">
            <span id="selectedCount">å·²é€‰æ‹© 0 é¡¹</span>
            <button class="btn btn-secondary" onclick="batchReindex()">é‡æ–°ç´¢å¼•</button>
            <button class="btn btn-secondary" onclick="batchDownload()">æ‰¹é‡ä¸‹è½½</button>
            <button class="btn btn-secondary" style="color: #dc2626;" onclick="batchDelete()">æ‰¹é‡åˆ é™¤</button>
        </div>
        
        <div class="toolbar">
            <div class="toolbar-left">
                <input type="text" class="search-input" placeholder="æœç´¢æ–‡æ¡£åç§°...">
                <select class="filter-select">
                    <option>å…¨éƒ¨çŠ¶æ€</option>
                    <option>å·²å®Œæˆ</option>
                    <option>ç´¢å¼•ä¸­</option>
                    <option>å¾…å¤„ç†</option>
                    <option>å¤±è´¥</option>
                </select>
                <select class="filter-select">
                    <option>å…¨éƒ¨ç±»å‹</option>
                    <option>PDF</option>
                    <option>Word</option>
                    <option>Markdown</option>
                    <option>ç½‘é¡µ</option>
                </select>
            </div>
            <div class="toolbar-right">
                <button class="btn btn-secondary">å¯¼å‡ºåˆ—è¡¨</button>
            </div>
        </div>
        
        <div class="documents-table">
            <div class="table-header">
                <div><input type="checkbox" class="checkbox" id="selectAll" onchange="toggleSelectAll()"></div>
                <div>æ–‡æ¡£åç§°</div>
                <div>ç±»å‹</div>
                <div>çŠ¶æ€</div>
                <div>ä¸Šä¼ æ—¶é—´</div>
                <div>æ“ä½œ</div>
            </div>
            <div class="table-row">
                <div><input type="checkbox" class="checkbox" onchange="updateBatchActions()"></div>
                <div class="doc-name">
                    <span class="doc-icon">ğŸ“„</span>
                    <div>
                        <div>äº§å“ä½¿ç”¨æ‰‹å†Œ.pdf</div>
                        <div class="doc-size">2.5 MB</div>
                    </div>
                </div>
                <div>PDF</div>
                <div><span class="doc-status status-success">å·²å®Œæˆ</span></div>
                <div>2024-01-20 10:30</div>
                <div class="doc-actions">
                    <button class="btn-icon" title="é¢„è§ˆ">ğŸ‘ï¸</button>
                    <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                    <button class="btn-icon" title="é‡æ–°ç´¢å¼•">ğŸ”„</button>
                    <button class="btn-icon" title="åˆ é™¤">ğŸ—‘ï¸</button>
                </div>
            </div>
            <div class="table-row">
                <div><input type="checkbox" class="checkbox" onchange="updateBatchActions()"></div>
                <div class="doc-name">
                    <span class="doc-icon">ğŸ“„</span>
                    <div>
                        <div>APIæ¥å£æ–‡æ¡£.docx</div>
                        <div class="doc-size">1.8 MB</div>
                    </div>
                </div>
                <div>Word</div>
                <div><span class="doc-status status-success">å·²å®Œæˆ</div>
                <div>2024-01-19 15:20</div>
                <div class="doc-actions">
                    <button class="btn-icon" title="é¢„è§ˆ">ğŸ‘ï¸</button>
                    <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                    <button class="btn-icon" title="é‡æ–°ç´¢å¼•">ğŸ”„</button>
                    <button class="btn-icon" title="åˆ é™¤">ğŸ—‘ï¸</button>
                </div>
            </div>
            <div class="table-row">
                <div><input type="checkbox" class="checkbox" onchange="updateBatchActions()"></div>
                <div class="doc-name">
                    <span class="doc-icon">ğŸ“„</span>
                    <div>
                        <div>ç”¨æˆ·æŒ‡å—.md</div>
                        <div class="doc-size">856 KB</div>
                    </div>
                </div>
                <div>Markdown</div>
                <div>
                    <span class="doc-status status-processing">ç´¢å¼•ä¸­</span>
                    <div class="doc-progress">è¿›åº¦: 65%</div>
                </div>
                <div>2024-01-20 14:15</div>
                <div class="doc-actions">
                    <button class="btn-icon" title="é¢„è§ˆ">ğŸ‘ï¸</button>
                    <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                    <button class="btn-icon" title="å–æ¶ˆ">â¹ï¸</button>
                    <button class="btn-icon" title="åˆ é™¤">ğŸ—‘ï¸</button>
                </div>
            </div>
            <div class="table-row">
                <div><input type="checkbox" class="checkbox" onchange="updateBatchActions()"></div>
                <div class="doc-name">
                    <span class="doc-icon">ğŸŒ</span>
                    <div>
                        <div>https://docs.example.com/api</div>
                        <div class="doc-size">ç½‘é¡µæŠ“å–</div>
                    </div>
                </div>
                <div>ç½‘é¡µ</div>
                <div><span class="doc-status status-success">å·²å®Œæˆ</span></div>
                <div>2024-01-18 09:00</div>
                <div class="doc-actions">
                    <button class="btn-icon" title="é¢„è§ˆ">ğŸ‘ï¸</button>
                    <button class="btn-icon" title="åˆ·æ–°">ğŸ”„</button>
                    <button class="btn-icon" title="åˆ é™¤">ğŸ—‘ï¸</button>
                </div>
            </div>
            <div class="table-row">
                <div><input type="checkbox" class="checkbox" onchange="updateBatchActions()"></div>
                <div class="doc-name">
                    <span class="doc-icon">ğŸ“„</span>
                    <div>
                        <div>æŠ€æœ¯è§„èŒƒ.txt</div>
                        <div class="doc-size">234 KB</div>
                    </div>
                </div>
                <div>TXT</div>
                <div><span class="doc-status status-error">å¤±è´¥</span></div>
                <div>2024-01-17 16:45</div>
                <div class="doc-actions">
                    <button class="btn-icon" title="é¢„è§ˆ">ğŸ‘ï¸</button>
                    <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                    <button class="btn-icon" title="é‡è¯•">ğŸ”„</button>
                    <button class="btn-icon" title="åˆ é™¤">ğŸ—‘ï¸</button>
                </div>
            </div>
        </div>
        
        <div class="pagination">
            <button class="page-btn">ä¸Šä¸€é¡µ</button>
            <button class="page-btn active">1</button>
            <button class="page-btn">2</button>
            <button class="page-btn">3</button>
            <button class="page-btn">ä¸‹ä¸€é¡µ</button>
        </div>
        
        <div class="tech-section">
            <h2>ğŸ“‹ åŠŸèƒ½è¯´æ˜ä¸æŠ€æœ¯å®ç°</h2>
            
            <div class="tech-item">
                <h3>1. æ–‡æ¡£åˆ—è¡¨ç®¡ç†</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>å±•ç¤ºå’Œç®¡ç†çŸ¥è¯†åº“ä¸­çš„æ‰€æœ‰æ–‡æ¡£ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>è¡¨æ ¼ç»„ä»¶å±•ç¤ºæ–‡æ¡£åˆ—è¡¨</li>
                    <li>æ”¯æŒæ’åºã€ç­›é€‰ã€æœç´¢</li>
                    <li>åˆ†é¡µç»„ä»¶å¤„ç†å¤§é‡æ–‡æ¡£</li>
                    <li>å®æ—¶æ›´æ–°æ–‡æ¡£çŠ¶æ€ï¼ˆWebSocketï¼‰</li>
                    <li>è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–æ€§èƒ½</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>GET /api/v1/documents - è·å–æ–‡æ¡£åˆ—è¡¨</li>
                    <li>æ”¯æŒåˆ†é¡µï¼špage, page_size</li>
                    <li>æ”¯æŒæœç´¢ï¼šsearch å‚æ•°</li>
                    <li>æ”¯æŒç­›é€‰ï¼šstatus, type, knowledge_base_id</li>
                    <li>æ”¯æŒæ’åºï¼šsort_by, order</li>
                    <li>ä½¿ç”¨æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢</li>
                </ul>
                <div class="code-block">
// åç«¯æŸ¥è¯¢ç¤ºä¾‹
GET /api/v1/documents?knowledge_base_id=123&page=1&page_size=20&status=completed&search=API
Response: {
  "data": [...],
  "total": 156,
  "page": 1,
  "page_size": 20
}
                </div>
            </div>
            
            <div class="tech-item">
                <h3>2. æ‰¹é‡æ“ä½œ</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>æ”¯æŒæ‰¹é‡é€‰æ‹©ã€åˆ é™¤ã€ä¸‹è½½ã€é‡æ–°ç´¢å¼•ç­‰æ“ä½œã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>å…¨é€‰/å–æ¶ˆå…¨é€‰åŠŸèƒ½</li>
                    <li>å¤šé€‰çŠ¶æ€ç®¡ç†</li>
                    <li>æ‰¹é‡æ“ä½œå·¥å…·æ </li>
                    <li>ç¡®è®¤å¯¹è¯æ¡†é˜²æ­¢è¯¯æ“ä½œ</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>POST /api/v1/documents/batch-delete - æ‰¹é‡åˆ é™¤</li>
                    <li>POST /api/v1/documents/batch-reindex - æ‰¹é‡é‡æ–°ç´¢å¼•</li>
                    <li>POST /api/v1/documents/batch-download - æ‰¹é‡ä¸‹è½½ï¼ˆç”ŸæˆZIPï¼‰</li>
                    <li>ä½¿ç”¨äº‹åŠ¡ä¿è¯æ“ä½œåŸå­æ€§</li>
                    <li>å¼‚æ­¥å¤„ç†æ‰¹é‡æ“ä½œ</li>
                </ul>
                <div class="code-block">
// æ‰¹é‡åˆ é™¤ç¤ºä¾‹
POST /api/v1/documents/batch-delete
Body: {
  "document_ids": [1, 2, 3, 4, 5]
}
Response: {
  "success": true,
  "deleted_count": 5
}
                </div>
            </div>
            
            <div class="tech-item">
                <h3>3. æ–‡æ¡£é¢„è§ˆ</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>åœ¨çº¿é¢„è§ˆæ–‡æ¡£å†…å®¹ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>PDFé¢„è§ˆï¼šä½¿ç”¨ PDF.js</li>
                    <li>Markdowné¢„è§ˆï¼šä½¿ç”¨ Marked.js æˆ– React Markdown</li>
                    <li>Wordé¢„è§ˆï¼šè½¬æ¢ä¸ºHTMLæˆ–PDFåé¢„è§ˆ</li>
                    <li>å›¾ç‰‡é¢„è§ˆï¼šç›´æ¥æ˜¾ç¤º</li>
                    <li>æ¨¡æ€æ¡†ç»„ä»¶å±•ç¤ºé¢„è§ˆå†…å®¹</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>GET /api/v1/documents/{id}/preview - è·å–é¢„è§ˆå†…å®¹</li>
                    <li>PDFï¼šç›´æ¥è¿”å›æ–‡ä»¶æµ</li>
                    <li>Wordï¼šè½¬æ¢ä¸ºHTMLè¿”å›</li>
                    <li>Markdownï¼šè½¬æ¢ä¸ºHTMLè¿”å›</li>
                    <li>ç¼“å­˜é¢„è§ˆå†…å®¹æå‡æ€§èƒ½</li>
                </ul>
            </div>
            
            <div class="tech-item">
                <h3>4. æ–‡æ¡£ä¸‹è½½</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>ä¸‹è½½åŸå§‹æ–‡æ¡£æ–‡ä»¶ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>ä½¿ç”¨ Blob URL ä¸‹è½½æ–‡ä»¶</li>
                    <li>æ˜¾ç¤ºä¸‹è½½è¿›åº¦</li>
                    <li>æ”¯æŒæ‰¹é‡ä¸‹è½½ï¼ˆZIPå‹ç¼©ï¼‰</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>GET /api/v1/documents/{id}/download - ä¸‹è½½æ–‡æ¡£</li>
                    <li>ä»å¯¹è±¡å­˜å‚¨ï¼ˆS3/OSSï¼‰è·å–æ–‡ä»¶</li>
                    <li>è®¾ç½®æ­£ç¡®çš„ Content-Type å’Œ Content-Disposition</li>
                    <li>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆRangeè¯·æ±‚ï¼‰</li>
                </ul>
            </div>
            
            <div class="tech-item">
                <h3>5. é‡æ–°ç´¢å¼•</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>é‡æ–°è§£æå’Œç´¢å¼•æ–‡æ¡£ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>è§¦å‘é‡æ–°ç´¢å¼•æ“ä½œ</li>
                    <li>æ˜¾ç¤ºç´¢å¼•è¿›åº¦</li>
                    <li>å®æ—¶æ›´æ–°çŠ¶æ€</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>POST /api/v1/documents/{id}/reindex - é‡æ–°ç´¢å¼•</li>
                    <li>åˆ é™¤æ—§çš„å‘é‡æ•°æ®</li>
                    <li>é‡æ–°è§£ææ–‡æ¡£</li>
                    <li>é‡æ–°åˆ†å—å’Œå‘é‡åŒ–</li>
                    <li>æ›´æ–°å‘é‡æ•°æ®åº“</li>
                </ul>
                <p><strong>AIç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>é‡æ–°æ‰§è¡Œæ–‡æ¡£è§£ææµç¨‹</li>
                    <li>ä½¿ç”¨æœ€æ–°çš„åˆ†å—ç­–ç•¥</li>
                    <li>ä½¿ç”¨æœ€æ–°çš„Embeddingæ¨¡å‹</li>
                </ul>
            </div>
            
            <div class="tech-item">
                <h3>6. æ–‡æ¡£çŠ¶æ€ç®¡ç†</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>è·Ÿè¸ªæ–‡æ¡£çš„å¤„ç†çŠ¶æ€ï¼ˆå¾…å¤„ç†ã€ç´¢å¼•ä¸­ã€å·²å®Œæˆã€å¤±è´¥ï¼‰ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>çŠ¶æ€æ ‡ç­¾æ˜¾ç¤º</li>
                    <li>è¿›åº¦æ¡æ˜¾ç¤ºç´¢å¼•è¿›åº¦</li>
                    <li>WebSocketå®æ—¶æ›´æ–°çŠ¶æ€</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>æ–‡æ¡£çŠ¶æ€å­˜å‚¨åœ¨æ•°æ®åº“</li>
                    <li>ä»»åŠ¡é˜Ÿåˆ—å¤„ç†ç´¢å¼•ä»»åŠ¡</li>
                    <li>Rediså­˜å‚¨ä»»åŠ¡è¿›åº¦</li>
                    <li>WebSocketæ¨é€çŠ¶æ€æ›´æ–°</li>
                    <li>å¤±è´¥é‡è¯•æœºåˆ¶</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.table-row .checkbox');
            checkboxes.forEach(cb => {
                cb.checked = selectAll.checked;
                const row = cb.closest('.table-row');
                if (selectAll.checked) {
                    row.classList.add('selected');
                } else {
                    row.classList.remove('selected');
                }
            });
            updateBatchActions();
        }
        
        function updateBatchActions() {
            const checkboxes = document.querySelectorAll('.table-row .checkbox:checked');
            const count = checkboxes.length;
            const batchActions = document.getElementById('batchActions');
            const selectedCount = document.getElementById('selectedCount');
            
            if (count > 0) {
                batchActions.classList.add('show');
                selectedCount.textContent = `å·²é€‰æ‹© ${count} é¡¹`;
            } else {
                batchActions.classList.remove('show');
            }
        }
        
        function batchReindex() {
            const selected = Array.from(document.querySelectorAll('.table-row .checkbox:checked'))
                .map(cb => cb.closest('.table-row').dataset.id);
            if (confirm(`ç¡®å®šè¦é‡æ–°ç´¢å¼•é€‰ä¸­çš„ ${selected.length} ä¸ªæ–‡æ¡£å—ï¼Ÿ`)) {
                // è°ƒç”¨APIé‡æ–°ç´¢å¼•
                console.log('é‡æ–°ç´¢å¼•:', selected);
            }
        }
        
        function batchDownload() {
            const selected = Array.from(document.querySelectorAll('.table-row .checkbox:checked'))
                .map(cb => cb.closest('.table-row').dataset.id);
            // è°ƒç”¨APIæ‰¹é‡ä¸‹è½½
            console.log('æ‰¹é‡ä¸‹è½½:', selected);
        }
        
        function batchDelete() {
            const selected = Array.from(document.querySelectorAll('.table-row .checkbox:checked'))
                .map(cb => cb.closest('.table-row').dataset.id);
            if (confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${selected.length} ä¸ªæ–‡æ¡£å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`)) {
                // è°ƒç”¨APIæ‰¹é‡åˆ é™¤
                console.log('æ‰¹é‡åˆ é™¤:', selected);
            }
        }
        
        // ç›‘å¬å•ä¸ªcheckboxå˜åŒ–
        document.querySelectorAll('.table-row .checkbox').forEach(cb => {
            cb.addEventListener('change', function() {
                const row = this.closest('.table-row');
                if (this.checked) {
                    row.classList.add('selected');
                } else {
                    row.classList.remove('selected');
                }
                updateBatchActions();
            });
        });
    </script>
</body>
</html>

