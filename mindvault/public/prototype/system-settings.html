<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿè®¾ç½® - Dify çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            color: #1f2937;
            line-height: 1.6;
        }

        .header {
            background: #fff;
            border-bottom: 1px solid #e5e7eb;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .back-btn {
            padding: 8px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 18px;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .container {
            max-width: 1200px;
            margin: 24px auto;
            padding: 0 24px;
        }

        .tabs {
            display: flex;
            gap: 8px;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            white-space: nowrap;
        }

        .tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .settings-card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .settings-card h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #111827;
            padding-bottom: 12px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
        }

        .form-label-hint {
            font-size: 13px;
            color: #6b7280;
            font-weight: normal;
            margin-left: 8px;
        }

        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .form-textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            min-height: 100px;
            resize: vertical;
        }

        .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .form-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .form-checkbox label {
            font-size: 14px;
            color: #374151;
            cursor: pointer;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
            margin-right: 12px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #d1d5db;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #3b82f6;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .test-button {
            margin-top: 8px;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-online {
            background: #d1fae5;
            color: #065f46;
        }

        .status-offline {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .status-dot.online {
            background: #10b981;
        }

        .status-dot.offline {
            background: #ef4444;
        }

        .storage-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .storage-item {
            background: #f9fafb;
            border-radius: 6px;
            padding: 16px;
        }

        .storage-label {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .storage-value {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
        }

        .storage-progress {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }

        .storage-progress-bar {
            height: 100%;
            background: #3b82f6;
            transition: width 0.3s;
        }

        .backup-list {
            list-style: none;
            margin-top: 20px;
        }

        .backup-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: #f9fafb;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .backup-info {
            flex: 1;
        }

        .backup-name {
            font-weight: 500;
            color: #111827;
            margin-bottom: 4px;
        }

        .backup-meta {
            font-size: 13px;
            color: #6b7280;
        }

        .backup-actions {
            display: flex;
            gap: 8px;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #bfdbfe;
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }

        .tech-section {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .tech-section h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #111827;
        }

        .tech-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f3f4f6;
        }

        .tech-item:last-child {
            border-bottom: none;
        }

        .tech-item h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }

        .tech-item p {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.6;
        }

        .tech-item ul {
            margin-left: 20px;
            margin-top: 8px;
        }

        .tech-item li {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .code-block {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 12px;
            margin-top: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #374151;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <button class="back-btn" onclick="location.href='index.html'">â†</button>
            <h1>ç³»ç»Ÿè®¾ç½®</h1>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="location.href='api-management.html'">API ç®¡ç†</button>
            <button class="btn btn-primary" onclick="saveAllSettings()">ä¿å­˜æ‰€æœ‰è®¾ç½®</button>
        </div>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="switchTab('general')">åŸºæœ¬è®¾ç½®</button>
            <button class="tab" onclick="switchTab('email')">é‚®ä»¶è®¾ç½®</button>
            <button class="tab" onclick="switchTab('storage')">å­˜å‚¨è®¾ç½®</button>
            <button class="tab" onclick="switchTab('backup')">å¤‡ä»½æ¢å¤</button>
            <button class="tab" onclick="switchTab('security')">å®‰å…¨è®¾ç½®</button>
            <button class="tab" onclick="switchTab('logs')">ç³»ç»Ÿæ—¥å¿—</button>
            <button class="tab" onclick="switchTab('maintenance')">ç³»ç»Ÿç»´æŠ¤</button>
        </div>

        <div id="general" class="tab-content active">
            <div class="settings-card">
                <h2>ç«™ç‚¹è®¾ç½®</h2>
                <div class="form-group">
                    <label class="form-label">ç«™ç‚¹åç§°</label>
                    <input type="text" class="form-input" value="Dify çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ">
                </div>
                <div class="form-group">
                    <label class="form-label">ç«™ç‚¹æè¿°</label>
                    <textarea class="form-textarea" rows="3">ä¼ä¸šçº§çŸ¥è¯†åº“ç®¡ç†å¹³å°ï¼Œæ”¯æŒæ–‡æ¡£ä¸Šä¼ ã€æ™ºèƒ½æ£€ç´¢å’Œå›¢é˜Ÿåä½œ</textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ç«™ç‚¹ URL</label>
                        <input type="url" class="form-input" value="https://dify.example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ—¶åŒº</label>
                        <select class="form-select">
                            <option>Asia/Shanghai (UTC+8)</option>
                            <option>UTC</option>
                            <option>America/New_York (UTC-5)</option>
                            <option>Europe/London (UTC+0)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">è¯­è¨€</label>
                    <select class="form-select">
                        <option>ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option>
                        <option>English</option>
                        <option>æ—¥æœ¬èª</option>
                    </select>
                </div>
            </div>

            <div class="settings-card">
                <h2>ç”¨æˆ·æ³¨å†Œè®¾ç½®</h2>
                <div class="form-group">
                    <label class="form-label">
                        <span>å…è®¸ç”¨æˆ·æ³¨å†Œ</span>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                </div>
                <div class="form-group">
                    <label class="form-label">æ³¨å†Œæ–¹å¼</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                        <div class="form-checkbox">
                            <input type="checkbox" id="regEmail" checked>
                            <label for="regEmail">é‚®ç®±æ³¨å†Œ</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="regSocial" checked>
                            <label for="regSocial">ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆGitHubã€Googleç­‰ï¼‰</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="regInvite">
                            <label for="regInvite">ä»…é‚€è¯·æ³¨å†Œ</label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">é»˜è®¤ç”¨æˆ·è§’è‰²</label>
                    <select class="form-select">
                        <option>æ™®é€šç”¨æˆ·</option>
                        <option>ç¼–è¾‘è€…</option>
                        <option>ç®¡ç†å‘˜</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="email" class="tab-content">
            <div class="settings-card">
                <h2>
                    é‚®ä»¶æœåŠ¡å™¨è®¾ç½®
                    <span class="status-indicator" id="emailStatus">
                        <span class="status-dot online"></span>
                        <span>è¿æ¥æ­£å¸¸</span>
                    </span>
                </h2>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">SMTP æœåŠ¡å™¨</label>
                        <input type="text" class="form-input" value="smtp.example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç«¯å£</label>
                        <input type="number" class="form-input" value="587">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">ç”¨æˆ·å</label>
                        <input type="text" class="form-input" value="noreply@example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å¯†ç </label>
                        <input type="password" class="form-input" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">åŠ å¯†æ–¹å¼</label>
                    <div style="display: flex; gap: 16px; margin-top: 8px;">
                        <label class="form-checkbox">
                            <input type="radio" name="encryption" value="tls" checked>
                            <span>TLS</span>
                        </label>
                        <label class="form-checkbox">
                            <input type="radio" name="encryption" value="ssl">
                            <span>SSL</span>
                        </label>
                        <label class="form-checkbox">
                            <input type="radio" name="encryption" value="none">
                            <span>æ— åŠ å¯†</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">å‘ä»¶äººé‚®ç®±</label>
                    <input type="email" class="form-input" value="noreply@example.com">
                </div>
                <div class="form-group">
                    <label class="form-label">å‘ä»¶äººåç§°</label>
                    <input type="text" class="form-input" value="Dify çŸ¥è¯†åº“ç³»ç»Ÿ">
                </div>
                <div class="test-button">
                    <button class="btn btn-secondary" onclick="testEmailConnection()">æµ‹è¯•è¿æ¥</button>
                </div>
            </div>

            <div class="settings-card">
                <h2>é‚®ä»¶æ¨¡æ¿è®¾ç½®</h2>
                <div class="form-group">
                    <label class="form-label">æ¬¢è¿é‚®ä»¶</label>
                    <div class="form-checkbox">
                        <input type="checkbox" id="welcomeEmail" checked>
                        <label for="welcomeEmail">æ–°ç”¨æˆ·æ³¨å†Œæ—¶å‘é€æ¬¢è¿é‚®ä»¶</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">éªŒè¯é‚®ä»¶</label>
                    <div class="form-checkbox">
                        <input type="checkbox" id="verifyEmail" checked>
                        <label for="verifyEmail">å‘é€é‚®ç®±éªŒè¯é‚®ä»¶</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">é€šçŸ¥é‚®ä»¶</label>
                    <div class="form-checkbox">
                        <input type="checkbox" id="notifyEmail" checked>
                        <label for="notifyEmail">æ–‡æ¡£å¤„ç†å®Œæˆæ—¶å‘é€é€šçŸ¥é‚®ä»¶</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">é‚®ä»¶ç­¾å</label>
                    <textarea class="form-textarea" rows="3">æ„Ÿè°¢ä½¿ç”¨ Dify çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ
å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ç®¡ç†å‘˜</textarea>
                </div>
            </div>
        </div>

        <div id="storage" class="tab-content">
            <div class="settings-card">
                <h2>å­˜å‚¨é…ç½®</h2>
                <div class="alert alert-info">
                    å½“å‰å­˜å‚¨ä½¿ç”¨æƒ…å†µï¼šå·²ä½¿ç”¨ 2.3 GB / 10 GB
                </div>
                <div class="storage-info">
                    <div class="storage-item">
                        <div class="storage-label">æ–‡æ¡£å­˜å‚¨</div>
                        <div class="storage-value">1.8 GB</div>
                        <div class="storage-progress">
                            <div class="storage-progress-bar" style="width: 65%"></div>
                        </div>
                    </div>
                    <div class="storage-item">
                        <div class="storage-label">å‘é‡æ•°æ®åº“</div>
                        <div class="storage-value">432 MB</div>
                        <div class="storage-progress">
                            <div class="storage-progress-bar" style="width: 30%"></div>
                        </div>
                    </div>
                    <div class="storage-item">
                        <div class="storage-label">å¤‡ä»½æ–‡ä»¶</div>
                        <div class="storage-value">156 MB</div>
                        <div class="storage-progress">
                            <div class="storage-progress-bar" style="width: 12%"></div>
                        </div>
                    </div>
                    <div class="storage-item">
                        <div class="storage-label">ç³»ç»Ÿæ—¥å¿—</div>
                        <div class="storage-value">84 MB</div>
                        <div class="storage-progress">
                            <div class="storage-progress-bar" style="width: 8%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="settings-card">
                <h2>å­˜å‚¨æä¾›å•†</h2>
                <div class="form-group">
                    <label class="form-label">æ–‡æ¡£å­˜å‚¨</label>
                    <select class="form-select" id="storageProvider">
                        <option value="local">æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</option>
                        <option value="s3">Amazon S3</option>
                        <option value="oss">é˜¿é‡Œäº‘ OSS</option>
                        <option value="cos">è…¾è®¯äº‘ COS</option>
                        <option value="minio">MinIO</option>
                    </select>
                </div>

                <div id="s3Settings" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Access Key ID</label>
                            <input type="text" class="form-input" placeholder="AKIAIOSFODNN7EXAMPLE">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Secret Access Key</label>
                            <input type="password" class="form-input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Bucket åç§°</label>
                            <input type="text" class="form-input" placeholder="my-documents-bucket">
                        </div>
                        <div class="form-group">
                            <label class="form-label">åŒºåŸŸ</label>
                            <input type="text" class="form-input" placeholder="us-east-1">
                        </div>
                    </div>
                </div>

                <div id="localSettings">
                    <div class="form-group">
                        <label class="form-label">å­˜å‚¨è·¯å¾„</label>
                        <input type="text" class="form-input" value="/var/lib/dify/documents">
                        <div class="form-label-hint">æ–‡æ¡£æ–‡ä»¶çš„æœ¬åœ°å­˜å‚¨è·¯å¾„</div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">æ–‡ä»¶å¤§å°é™åˆ¶</label>
                    <input type="number" class="form-input" value="100">
                    <select class="form-select" style="width: 100px; margin-top: 8px;">
                        <option>MB</option>
                        <option>GB</option>
                    </select>
                </div>
            </div>
        </div>

        <div id="backup" class="tab-content">
            <div class="settings-card">
                <h2>å¤‡ä»½è®¾ç½®</h2>
                <div class="form-group">
                    <label class="form-label">è‡ªåŠ¨å¤‡ä»½</label>
                    <div class="form-checkbox">
                        <input type="checkbox" id="autoBackup" checked>
                        <label for="autoBackup">å¯ç”¨è‡ªåŠ¨å¤‡ä»½</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">å¤‡ä»½é¢‘ç‡</label>
                        <select class="form-select">
                            <option>æ¯å¤©</option>
                            <option>æ¯å‘¨</option>
                            <option>æ¯æœˆ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å¤‡ä»½ä¿ç•™æ—¶é—´</label>
                        <select class="form-select">
                            <option>7å¤©</option>
                            <option>30å¤©</option>
                            <option>90å¤©</option>
                            <option>1å¹´</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">å¤‡ä»½å­˜å‚¨ä½ç½®</label>
                    <input type="text" class="form-input" value="/var/backups/dify">
                </div>
                <div class="form-group">
                    <label class="form-label">å¤‡ä»½å†…å®¹</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                        <div class="form-checkbox">
                            <input type="checkbox" id="backupDb" checked>
                            <label for="backupDb">æ•°æ®åº“</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="backupDocuments" checked>
                            <label for="backupDocuments">æ–‡æ¡£æ–‡ä»¶</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="backupVectors">
                            <label for="backupVectors">å‘é‡æ•°æ®</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="backupConfig" checked>
                            <label for="backupConfig">ç³»ç»Ÿé…ç½®</label>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="createBackup()">ç«‹å³åˆ›å»ºå¤‡ä»½</button>
                    <button class="btn btn-secondary" onclick="restoreBackup()">æ¢å¤å¤‡ä»½</button>
                </div>
            </div>

            <div class="settings-card">
                <h2>å¤‡ä»½å†å²</h2>
                <ul class="backup-list">
                    <li class="backup-item">
                        <div class="backup-info">
                            <div class="backup-name">å®Œæ•´å¤‡ä»½ - 2024-01-20</div>
                            <div class="backup-meta">å¤§å°: 2.1 GB â€¢ ç±»å‹: è‡ªåŠ¨ â€¢ çŠ¶æ€: å®Œæˆ</div>
                        </div>
                        <div class="backup-actions">
                            <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                            <button class="btn-icon" title="åˆ é™¤" style="color: #ef4444;">ğŸ—‘ï¸</button>
                        </div>
                    </li>
                    <li class="backup-item">
                        <div class="backup-info">
                            <div class="backup-name">å¢é‡å¤‡ä»½ - 2024-01-19</div>
                            <div class="backup-meta">å¤§å°: 456 MB â€¢ ç±»å‹: è‡ªåŠ¨ â€¢ çŠ¶æ€: å®Œæˆ</div>
                        </div>
                        <div class="backup-actions">
                            <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                            <button class="btn-icon" title="åˆ é™¤" style="color: #ef4444;">ğŸ—‘ï¸</button>
                        </div>
                    </li>
                    <li class="backup-item">
                        <div class="backup-info">
                            <div class="backup-name">æ•°æ®åº“å¤‡ä»½ - 2024-01-18</div>
                            <div class="backup-meta">å¤§å°: 234 MB â€¢ ç±»å‹: æ‰‹åŠ¨ â€¢ çŠ¶æ€: å®Œæˆ</div>
                        </div>
                        <div class="backup-actions">
                            <button class="btn-icon" title="ä¸‹è½½">â¬‡ï¸</button>
                            <button class="btn-icon" title="åˆ é™¤" style="color: #ef4444;">ğŸ—‘ï¸</button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div id="security" class="tab-content">
            <div class="settings-card">
                <h2>å®‰å…¨è®¾ç½®</h2>
                <div class="form-group">
                    <label class="form-label">
                        <span>å¼ºåˆ¶ HTTPS</span>
                        <label class="switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </label>
                    <div class="form-label-hint">å¼ºåˆ¶æ‰€æœ‰æµé‡ä½¿ç”¨ HTTPS</div>
                </div>
                <div class="form-group">
                    <label class="form-label">
                        <span>å¯ç”¨åŒå› ç´ è®¤è¯</span>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </label>
                    <div class="form-label-hint">ä¸ºç®¡ç†å‘˜è´¦å·å¯ç”¨åŒå› ç´ è®¤è¯</div>
                </div>
                <div class="form-group">
                    <label class="form-label">ä¼šè¯è¶…æ—¶æ—¶é—´</label>
                    <input type="number" class="form-input" value="60">
                    <select class="form-select" style="width: 100px; margin-top: 8px;">
                        <option>åˆ†é’Ÿ</option>
                        <option>å°æ—¶</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">å¯†ç ç­–ç•¥</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                        <div class="form-checkbox">
                            <input type="checkbox" id="passwordLength" checked>
                            <label for="passwordLength">è‡³å°‘8ä¸ªå­—ç¬¦</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="passwordComplexity" checked>
                            <label for="passwordComplexity">åŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="passwordExpiry">
                            <label for="passwordExpiry">90å¤©å¼ºåˆ¶æ›´æ¢å¯†ç </label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">IP ç™½åå•</label>
                    <textarea class="form-textarea" placeholder="æ¯è¡Œè¾“å…¥ä¸€ä¸ª IP åœ°å€æˆ– CIDR èŒƒå›´
ä¾‹å¦‚ï¼š
192.168.1.0/24
10.0.0.1"></textarea>
                    <div class="form-label-hint">ç•™ç©ºè¡¨ç¤ºå…è®¸æ‰€æœ‰ IP è®¿é—®</div>
                </div>
            </div>

            <div class="settings-card">
                <h2>å®¡è®¡æ—¥å¿—</h2>
                <div class="form-group">
                    <label class="form-label">å®¡è®¡æ—¥å¿—ä¿ç•™æ—¶é—´</label>
                    <select class="form-select">
                        <option>30å¤©</option>
                        <option>90å¤©</option>
                        <option>180å¤©</option>
                        <option>1å¹´</option>
                        <option>æ°¸ä¹…</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">è®°å½•çš„æ“ä½œç±»å‹</label>
                    <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                        <div class="form-checkbox">
                            <input type="checkbox" id="logLogin" checked>
                            <label for="logLogin">ç™»å½•/ç™»å‡º</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="logDataAccess" checked>
                            <label for="logDataAccess">æ•°æ®è®¿é—®</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="logConfiguration" checked>
                            <label for="logConfiguration">é…ç½®å˜æ›´</label>
                        </div>
                        <div class="form-checkbox">
                            <input type="checkbox" id="logSecurity">
                            <label for="logSecurity">å®‰å…¨äº‹ä»¶</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="logs" class="tab-content">
            <div class="settings-card">
                <h2>ç³»ç»Ÿæ—¥å¿—</h2>
                <div class="form-group">
                    <label class="form-label">æ—¥å¿—çº§åˆ«</label>
                    <select class="form-select">
                        <option>DEBUG - æ‰€æœ‰ä¿¡æ¯</option>
                        <option>INFO - å¸¸è§„ä¿¡æ¯</option>
                        <option>WARNING - è­¦å‘Šä¿¡æ¯</option>
                        <option>ERROR - é”™è¯¯ä¿¡æ¯</option>
                        <option>CRITICAL - ä¸¥é‡é”™è¯¯</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">æ—¥å¿—æ–‡ä»¶ä½ç½®</label>
                    <input type="text" class="form-input" value="/var/log/dify">
                </div>
                <div class="form-group">
                    <label class="form-label">æ—¥å¿—æ–‡ä»¶å¤§å°é™åˆ¶</label>
                    <input type="number" class="form-input" value="100">
                    <select class="form-select" style="width: 100px; margin-top: 8px;">
                        <option>MB</option>
                        <option>GB</option>
                    </select>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="viewLogs()">æŸ¥çœ‹æ—¥å¿—</button>
                    <button class="btn btn-secondary" onclick="downloadLogs()">ä¸‹è½½æ—¥å¿—</button>
                    <button class="btn btn-danger" onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
                </div>
            </div>
        </div>

        <div id="maintenance" class="tab-content">
            <div class="alert alert-warning">
                <strong>è­¦å‘Šï¼š</strong>ç»´æŠ¤æ“ä½œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿå¯ç”¨æ€§ï¼Œè¯·åœ¨ç»´æŠ¤çª—å£æœŸé—´æ‰§è¡Œã€‚
            </div>

            <div class="settings-card">
                <h2>ç³»ç»Ÿç»´æŠ¤</h2>
                <div class="form-group">
                    <label class="form-label">ç»´æŠ¤æ¨¡å¼</label>
                    <div class="form-checkbox">
                        <input type="checkbox" id="maintenanceMode">
                        <label for="maintenanceMode">å¯ç”¨ç»´æŠ¤æ¨¡å¼</label>
                    </div>
                    <div class="form-label-hint">å¯ç”¨åï¼Œæ™®é€šç”¨æˆ·å°†æ— æ³•è®¿é—®ç³»ç»Ÿ</div>
                </div>
                <div class="form-group">
                    <label class="form-label">ç»´æŠ¤æ¶ˆæ¯</label>
                    <textarea class="form-textarea" rows="3" placeholder="ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤ä¸­ï¼Œé¢„è®¡å®Œæˆæ—¶é—´..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">ç¼“å­˜ç®¡ç†</label>
                    <div style="display: flex; gap: 12px; margin-top: 8px;">
                        <button class="btn btn-secondary" onclick="clearCache()">æ¸…ç©ºç¼“å­˜</button>
                        <button class="btn btn-secondary" onclick="rebuildIndex()">é‡å»ºç´¢å¼•</button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">æ•°æ®åº“ç»´æŠ¤</label>
                    <div style="display: flex; gap: 12px; margin-top: 8px;">
                        <button class="btn btn-secondary" onclick="optimizeDatabase()">ä¼˜åŒ–æ•°æ®åº“</button>
                        <button class="btn btn-danger" onclick="resetDatabase()">é‡ç½®æ•°æ®åº“</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="tech-section">
            <h2>ğŸ“‹ åŠŸèƒ½è¯´æ˜ä¸æŠ€æœ¯å®ç°</h2>

            <div class="tech-item">
                <h3>1. é…ç½®ç®¡ç†ç³»ç»Ÿ</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>ç®¡ç†ç³»ç»Ÿå„é¡¹é…ç½®ï¼Œæ”¯æŒå®æ—¶æ›´æ–°å’ŒæŒä¹…åŒ–å­˜å‚¨ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>Tab å¼å¯¼èˆªï¼šåˆ†ç±»ç®¡ç†ä¸åŒé…ç½®é¡¹</li>
                    <li>è¡¨å•éªŒè¯ï¼šå®æ—¶éªŒè¯è¾“å…¥æœ‰æ•ˆæ€§</li>
                    <li>é…ç½®å¯¼å…¥å¯¼å‡ºï¼šæ”¯æŒ JSON æ ¼å¼å¯¼å…¥å¯¼å‡º</li>
                    <li>å®æ—¶é¢„è§ˆï¼šéƒ¨åˆ†é…ç½®å˜æ›´å¯å®æ—¶é¢„è§ˆæ•ˆæœ</li>
                    <li>é…ç½®ç‰ˆæœ¬ç®¡ç†ï¼šæ”¯æŒé…ç½®å›æ»š</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>é…ç½®å­˜å‚¨ï¼šæ•°æ®åº“ + ç¼“å­˜å¤šå±‚å­˜å‚¨</li>
                    <li>é…ç½®çƒ­æ›´æ–°ï¼šæ— éœ€é‡å¯æœåŠ¡æ›´æ–°é…ç½®</li>
                    <li>é…ç½®éªŒè¯ï¼šæœåŠ¡ç«¯éªŒè¯é…ç½®æœ‰æ•ˆæ€§</li>
                    <li>é…ç½®å®¡è®¡ï¼šè®°å½•é…ç½®å˜æ›´å†å²</li>
                    <li>é…ç½®æ¨¡æ¿ï¼šæ”¯æŒä¸åŒç¯å¢ƒé…ç½®æ¨¡æ¿</li>
                </ul>
                <div class="code-block">
# é…ç½®ç®¡ç†æœåŠ¡
class ConfigManager:
    def __init__(self):
        self.cache = {}
        self.db = ConfigDB()

    def get_config(self, key, default=None):
        # ä¼˜å…ˆä»ç¼“å­˜è¯»å–
        if key in self.cache:
            return self.cache[key]

        # ä»æ•°æ®åº“è¯»å–
        config = self.db.get_config(key)
        if config:
            self.cache[key] = config.value
            return config.value

        return default

    def set_config(self, key, value):
        # éªŒè¯é…ç½®
        if not self.validate_config(key, value):
            raise ValueError(f"Invalid config value for {key}")

        # æ›´æ–°æ•°æ®åº“
        config = self.db.set_config(key, value)

        # æ›´æ–°ç¼“å­˜
        self.cache[key] = value

        # è§¦å‘é…ç½®å˜æ›´äº‹ä»¶
        self.emit_config_change(key, value)

        return config

    def validate_config(self, key, value):
        # é…ç½®éªŒè¯è§„åˆ™
        validators = {
            'site_name': lambda v: isinstance(v, str) and 1 <= len(v) <= 100,
            'smtp_port': lambda v: isinstance(v, int) and 1 <= v <= 65535,
            'storage_limit': lambda v: isinstance(v, int) and v > 0
        }

        if key in validators:
            return validators[key](value)

        return True
                </div>
            </div>

            <div class="tech-item">
                <h3>2. é‚®ä»¶æœåŠ¡é›†æˆ</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>é›†æˆé‚®ä»¶æœåŠ¡ï¼Œæ”¯æŒç³»ç»Ÿé€šçŸ¥å’Œç”¨æˆ·é€šä¿¡ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>SMTP é…ç½®ç•Œé¢ï¼šå¯è§†åŒ–é…ç½®é‚®ä»¶æœåŠ¡å™¨</li>
                    <li>è¿æ¥æµ‹è¯•ï¼šå®æ—¶æµ‹è¯•é‚®ä»¶æœåŠ¡å™¨è¿æ¥</li>
                    <li>é‚®ä»¶æ¨¡æ¿ç¼–è¾‘ï¼šå¯è§†åŒ–ç¼–è¾‘é‚®ä»¶æ¨¡æ¿</li>
                    <li>é‚®ä»¶å‘é€æµ‹è¯•ï¼šæµ‹è¯•é‚®ä»¶å‘é€åŠŸèƒ½</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>é‚®ä»¶é˜Ÿåˆ—ï¼šå¼‚æ­¥å‘é€é‚®ä»¶ï¼Œæé«˜å“åº”é€Ÿåº¦</li>
                    <li>æ¨¡æ¿å¼•æ“ï¼šæ”¯æŒå˜é‡æ›¿æ¢çš„åŠ¨æ€æ¨¡æ¿</li>
                    <li>å‘é€ç»Ÿè®¡ï¼šè®°å½•é‚®ä»¶å‘é€æˆåŠŸç‡å’Œæ—¶é—´</li>
                    <li>é€€ä¿¡å¤„ç†ï¼šå¤„ç†å‘é€å¤±è´¥çš„é‚®ä»¶</li>
                    <li>å¤šæä¾›å•†æ”¯æŒï¼šæ”¯æŒ SMTPã€SendGridã€Mailgun ç­‰</li>
                </ul>
                <div class="code-block">
# é‚®ä»¶æœåŠ¡å®ç°
class EmailService:
    def __init__(self):
        self.smtp_config = self.load_smtp_config()

    def send_email(self, to_email, subject, template_name, context):
        # åŠ è½½æ¨¡æ¿
        template = self.load_template(template_name)

        # æ¸²æŸ“å†…å®¹
        html_content = template.render(**context)
        text_content = html2text(html_content)

        # æ„å»ºé‚®ä»¶
        msg = MIMEMultipart('alternative')
        msg['Subject'] = subject
        msg['From'] = self.smtp_config['from_email']
        msg['To'] = to_email

        msg.attach(MIMEText(text_content, 'plain'))
        msg.attach(MIMEText(html_content, 'html'))

        # å¼‚æ­¥å‘é€
        send_email_task.delay(msg)

    @celery.task
    def send_email_task(msg):
        try:
            with smtplib.SMTP(
                host=self.smtp_config['host'],
                port=self.smtp_config['port']
            ) as server:
                if self.smtp_config['use_tls']:
                    server.starttls()

                server.login(
                    self.smtp_config['username'],
                    self.smtp_config['password']
                )

                server.send_message(msg)

            log_email_sent(success=True)
        except Exception as e:
            log_email_sent(success=False, error=str(e))
            raise
                </div>
            </div>

            <div class="tech-item">
                <h3>3. å­˜å‚¨ç®¡ç†</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>ç®¡ç†æ–‡ä»¶å­˜å‚¨å’Œå‘é‡å­˜å‚¨ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>å­˜å‚¨ä½¿ç”¨æƒ…å†µä»ªè¡¨æ¿ï¼šå¯è§†åŒ–å±•ç¤ºå­˜å‚¨ä½¿ç”¨æƒ…å†µ</li>
                    <li>å­˜å‚¨æä¾›å•†é…ç½®ï¼šæ”¯æŒå¤šç§äº‘å­˜å‚¨æœåŠ¡</li>
                    <li>å­˜å‚¨è¿ç§»å·¥å…·ï¼šåœ¨ä¸åŒå­˜å‚¨æä¾›å•†é—´è¿ç§»æ•°æ®</li>
                    <li>å­˜å‚¨æ¸…ç†ï¼šæ¸…ç†è¿‡æœŸæˆ–ä¸´æ—¶æ–‡ä»¶</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>å­˜å‚¨æŠ½è±¡å±‚ï¼šç»Ÿä¸€çš„æ–‡ä»¶æ“ä½œæ¥å£</li>
                    <li>å¤šå­˜å‚¨åç«¯ï¼šæ”¯æŒæœ¬åœ°ã€S3ã€OSSã€COS ç­‰</li>
                    <li>å­˜å‚¨é…é¢ç®¡ç†ï¼šç”¨æˆ·å’Œç³»ç»Ÿçº§åˆ«çš„å­˜å‚¨é™åˆ¶</li>
                    <li>å­˜å‚¨ç›‘æ§ï¼šå®æ—¶ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µ</li>
                    <li>æ•°æ®è¿ç§»ï¼šæ”¯æŒåœ¨çº¿æ•°æ®è¿ç§»</li>
                </ul>
                <div class="code-block">
# å­˜å‚¨æŠ½è±¡å±‚
class StorageBackend(ABC):
    @abstractmethod
    def upload(self, file_obj, path):
        pass

    @abstractmethod
    def download(self, path):
        pass

    @abstractmethod
    def delete(self, path):
        pass

    @abstractmethod
    def list_files(self, prefix=''):
        pass

# S3 å­˜å‚¨å®ç°
class S3StorageBackend(StorageBackend):
    def __init__(self, config):
        self.s3_client = boto3.client(
            's3',
            aws_access_key_id=config['access_key'],
            aws_secret_access_key=config['secret_key'],
            region_name=config['region']
        )
        self.bucket = config['bucket']

    def upload(self, file_obj, path):
        self.s3_client.upload_fileobj(
            file_obj,
            self.bucket,
            path
        )
        return f"s3://{self.bucket}/{path}"

    def download(self, path):
        response = self.s3_client.get_object(
            Bucket=self.bucket,
            Key=path
        )
        return response['Body']
                </div>
            </div>

            <div class="tech-item">
                <h3>4. å¤‡ä»½ä¸æ¢å¤ç³»ç»Ÿ</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>ç³»ç»Ÿæ•°æ®å¤‡ä»½å’Œç¾éš¾æ¢å¤ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>å¤‡ä»½è®¡åˆ’é…ç½®ï¼šå®šæ—¶å¤‡ä»½è®¾ç½®</li>
                    <li>å¤‡ä»½å†å²ç®¡ç†ï¼šæŸ¥çœ‹å’Œç®¡ç†å¤‡ä»½æ–‡ä»¶</li>
                    <li>æ¢å¤å‘å¯¼ï¼šå¼•å¯¼å¼æ¢å¤æµç¨‹</li>
                    <li>å¤‡ä»½éªŒè¯ï¼šéªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>å¢é‡å¤‡ä»½ï¼šä»…å¤‡ä»½å˜æ›´æ•°æ®</li>
                    <li>åŠ å¯†å¤‡ä»½ï¼šå¤‡ä»½æ•°æ®åŠ å¯†å­˜å‚¨</li>
                    <li>å¤šç‚¹å¤‡ä»½ï¼šæ”¯æŒå¤šåœ°å¤‡ä»½å­˜å‚¨</li>
                    <li>å¤‡ä»½éªŒè¯ï¼šè‡ªåŠ¨éªŒè¯å¤‡ä»½å¯ç”¨æ€§</li>
                    <li>æ¢å¤æµ‹è¯•ï¼šå®šæœŸæµ‹è¯•æ¢å¤æµç¨‹</li>
                </ul>
                <div class="code-block">
# å¤‡ä»½ç®¡ç†å™¨
class BackupManager:
    def __init__(self):
        self.backup_dir = config.get('backup_dir', '/var/backups/dify')

    def create_backup(self, backup_type='full'):
        backup_id = generate_backup_id()
        backup_path = os.path.join(self.backup_dir, backup_id)

        # åˆ›å»ºå¤‡ä»½ç›®å½•
        os.makedirs(backup_path, exist_ok=True)

        # å¤‡ä»½æ•°æ®åº“
        self.backup_database(backup_path)

        # å¤‡ä»½æ–‡æ¡£æ–‡ä»¶
        self.backup_documents(backup_path)

        # å¤‡ä»½é…ç½®
        self.backup_config(backup_path)

        # åˆ›å»ºå¤‡ä»½å…ƒæ•°æ®
        metadata = {
            'id': backup_id,
            'type': backup_type,
            'timestamp': datetime.now().isoformat(),
            'size': self.calculate_backup_size(backup_path)
        }
        self.save_metadata(backup_path, metadata)

        # å‹ç¼©å¤‡ä»½æ–‡ä»¶
        self.compress_backup(backup_path)

        return backup_id

    def restore_backup(self, backup_id):
        backup_file = self.find_backup_file(backup_id)

        # éªŒè¯å¤‡ä»½æ–‡ä»¶
        if not self.validate_backup(backup_file):
            raise ValueError("Invalid backup file")

        # åœæ­¢ç›¸å…³æœåŠ¡
        self.stop_services()

        # æ¢å¤æ•°æ®
        self.restore_database(backup_file)
        self.restore_documents(backup_file)
        self.restore_config(backup_file)

        # å¯åŠ¨æœåŠ¡
        self.start_services()

        return True
                </div>
            </div>

            <div class="tech-item">
                <h3>5. ç³»ç»Ÿç›‘æ§ä¸æ—¥å¿—</h3>
                <p><strong>åŠŸèƒ½æè¿°ï¼š</strong>ç›‘æ§ç³»ç»ŸçŠ¶æ€å’Œè®°å½•æ“ä½œæ—¥å¿—ã€‚</p>
                <p><strong>å‰ç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>å®æ—¶çŠ¶æ€é¢æ¿ï¼šæ˜¾ç¤ºç³»ç»Ÿå¥åº·çŠ¶æ€</li>
                    <li>æ—¥å¿—æŸ¥çœ‹å™¨ï¼šæœç´¢å’Œç­›é€‰ç³»ç»Ÿæ—¥å¿—</li>
                    <li>æ€§èƒ½å›¾è¡¨ï¼šå±•ç¤ºç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡</li>
                    <li>å‘Šè­¦é…ç½®ï¼šé…ç½®ç³»ç»Ÿå‘Šè­¦è§„åˆ™</li>
                </ul>
                <p><strong>åç«¯å®ç°ï¼š</strong></p>
                <ul>
                    <li>ç»“æ„åŒ–æ—¥å¿—ï¼šJSON æ ¼å¼ç»“æ„åŒ–æ—¥å¿—</li>
                    <li>æ—¥å¿—èšåˆï¼šé›†ä¸­æ”¶é›†æ‰€æœ‰æœåŠ¡æ—¥å¿—</li>
                    <li>æ€§èƒ½ç›‘æ§ï¼šç›‘æ§ CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ</li>
                    <li>å‘Šè­¦ç³»ç»Ÿï¼šåŸºäºè§„åˆ™çš„è‡ªåŠ¨å‘Šè­¦</li>
                    <li>å®¡è®¡è·Ÿè¸ªï¼šè®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Tab åˆ‡æ¢
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰tabå†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            // ç§»é™¤æ‰€æœ‰tabçš„activeçŠ¶æ€
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            // æ˜¾ç¤ºé€‰ä¸­çš„tabå†…å®¹
            document.getElementById(tabName).classList.add('active');
            // è®¾ç½®é€‰ä¸­çš„tabä¸ºactive
            event.target.classList.add('active');
        }

        // å­˜å‚¨æä¾›å•†åˆ‡æ¢
        document.getElementById('storageProvider').addEventListener('change', function() {
            const provider = this.value;
            document.getElementById('s3Settings').style.display = 'none';
            document.getElementById('localSettings').style.display = 'none';

            if (provider === 's3') {
                document.getElementById('s3Settings').style.display = 'block';
            } else if (provider === 'local') {
                document.getElementById('localSettings').style.display = 'block';
            }
        });

        // æµ‹è¯•é‚®ä»¶è¿æ¥
        function testEmailConnection() {
            const emailStatus = document.getElementById('emailStatus');
            const statusDot = emailStatus.querySelector('.status-dot');
            const statusText = emailStatus.querySelector('span:last-child');

            // æ¨¡æ‹Ÿæµ‹è¯•
            emailStatus.className = 'status-indicator';
            emailStatus.classList.add('status-offline');
            statusDot.className = 'status-dot offline';
            statusText.textContent = 'æµ‹è¯•ä¸­...';

            setTimeout(() => {
                // æ¨¡æ‹ŸæˆåŠŸ
                emailStatus.className = 'status-indicator';
                emailStatus.classList.add('status-online');
                statusDot.className = 'status-dot online';
                statusText.textContent = 'è¿æ¥æ­£å¸¸';
            }, 1500);
        }

        // åˆ›å»ºå¤‡ä»½
        function createBackup() {
            if (confirm('ç¡®å®šè¦åˆ›å»ºæ–°çš„å¤‡ä»½å—ï¼Ÿè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚')) {
                alert('å¤‡ä»½ä»»åŠ¡å·²å¼€å§‹ï¼Œè¯·ç¨ååœ¨å¤‡ä»½å†å²ä¸­æŸ¥çœ‹è¿›åº¦ã€‚');
            }
        }

        // æ¢å¤å¤‡ä»½
        function restoreBackup() {
            if (confirm('è­¦å‘Šï¼šæ¢å¤å¤‡ä»½å°†è¦†ç›–å½“å‰æ•°æ®ï¼Œæ­¤æ“ä½œä¸å¯é€†ï¼ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                alert('è¯·åœ¨å¤‡ä»½å†å²ä¸­é€‰æ‹©è¦æ¢å¤çš„å¤‡ä»½æ–‡ä»¶ã€‚');
            }
        }

        // ä¿å­˜æ‰€æœ‰è®¾ç½®
        function saveAllSettings() {
            // æ”¶é›†æ‰€æœ‰è¡¨å•æ•°æ®
            const settings = {};
            document.querySelectorAll('.tab-content.active .form-input, .tab-content.active .form-select, .tab-content.active .form-textarea').forEach(input => {
                settings[input.id || input.name] = input.value;
            });

            // æ¨¡æ‹Ÿä¿å­˜
            console.log('ä¿å­˜è®¾ç½®:', settings);
            alert('è®¾ç½®å·²ä¿å­˜æˆåŠŸï¼');
        }

        // ç»´æŠ¤æ“ä½œ
        function clearCache() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºç¼“å­˜å—ï¼Ÿè¿™å¯èƒ½ä¼šæš‚æ—¶å½±å“ç³»ç»Ÿæ€§èƒ½ã€‚')) {
                alert('ç¼“å­˜å·²æ¸…ç©ºã€‚');
            }
        }

        function rebuildIndex() {
            if (confirm('ç¡®å®šè¦é‡å»ºç´¢å¼•å—ï¼Ÿè¿™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ã€‚')) {
                alert('ç´¢å¼•é‡å»ºä»»åŠ¡å·²å¼€å§‹ã€‚');
            }
        }

        function optimizeDatabase() {
            if (confirm('ç¡®å®šè¦ä¼˜åŒ–æ•°æ®åº“å—ï¼Ÿè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚')) {
                alert('æ•°æ®åº“ä¼˜åŒ–ä»»åŠ¡å·²å¼€å§‹ã€‚');
            }
        }

        function resetDatabase() {
            if (confirm('è­¦å‘Šï¼šé‡ç½®æ•°æ®åº“å°†åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œæ­¤æ“ä½œä¸å¯é€†ï¼ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                if (prompt('è¯·è¾“å…¥ "RESET" ç¡®è®¤é‡ç½®ï¼š') === 'RESET') {
                    alert('æ•°æ®åº“é‡ç½®ä»»åŠ¡å·²å¼€å§‹ã€‚');
                }
            }
        }

        // æ—¥å¿—æ“ä½œ
        function viewLogs() {
            alert('è·³è½¬åˆ°æ—¥å¿—æŸ¥çœ‹é¡µé¢ï¼ˆå®é™…é¡¹ç›®ä¸­åº”æ‰“å¼€æ–°é¡µé¢ï¼‰');
        }

        function downloadLogs() {
            alert('å¼€å§‹ä¸‹è½½æ—¥å¿—æ–‡ä»¶...');
        }

        function clearLogs() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ—¥å¿—å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                alert('æ—¥å¿—å·²æ¸…ç©ºã€‚');
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å­˜å‚¨æä¾›å•†æ˜¾ç¤º
            const providerSelect = document.getElementById('storageProvider');
            if (providerSelect) {
                providerSelect.dispatchEvent(new Event('change'));
            }
        });
    </script>
</body>
</html>